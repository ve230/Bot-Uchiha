module.exports = {
    name: "gerarimg",
    execute: async (sock, msg, args) => {
        const jid = msg.key.remoteJid;
        const prompt = args.join(" ");
        if (!prompt) return sock.sendMessage(jid, { text: "Use: !gerarimg <descrição>" });

        const apiKey = process.env.OPENAI_API_KEY;
        const resp = await fetch("https://api.openai.com/v1/images/generations", {
            method: "POST",
            headers: { "Authorization": `Bearer ${apiKey}`, "Content-Type": "application/json" },
            body: JSON.stringify({ prompt, n: 1, size: "512x512" })
        });

        const data = await resp.json();
        const url = data.data[0].url;
        await sock.sendMessage(jid, { image: { url }, caption: prompt });
    }
};